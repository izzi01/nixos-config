# Nix shortcuts (auto-detect OS)
if [[ "$(uname)" == "Darwin" ]]; then
  alias nix-apply='nix run .#apps.aarch64-darwin.apply'
  alias nix-build='nix run .#apps.aarch64-darwin.build'
  alias nix-build-switch='nix run .#apps.aarch64-darwin.build-switch'
  alias nix-rollback='nix run .#apps.aarch64-darwin.rollback'
else
  # Check if running NixOS or just Nix on Linux
  if [[ -f /etc/NIXOS ]]; then
    # Full NixOS installation
    alias nix-apply='nix run .#apps.aarch64-linux.apply'
    alias nix-build-switch='nix run .#apps.aarch64-linux.build-switch'
    alias nix-install='nix run .#apps.aarch64-linux.install'
    alias nix-install-secrets='nix run .#apps.aarch64-linux.install-with-secrets'
  else
    # Nix on regular Linux (use Home Manager standalone)
    ARCH=$(uname -m | sed 's/arm64/aarch64/')
    if [[ "$ARCH" == "aarch64" ]]; then
      alias nix-apply='home-manager switch --flake .#%USER%@aarch64-linux'
      alias nix-build='home-manager build --flake .#%USER%@aarch64-linux'
    else
      alias nix-apply='home-manager switch --flake .#%USER%@x86_64-linux'
      alias nix-build='home-manager build --flake .#%USER%@x86_64-linux'
    fi
  fi
fi
